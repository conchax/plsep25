<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>



<div style="height: 150vh; background-color: #f0f0f0;">
    <svg width="600" height="200" viewBox="0 0 600 200" id="svg-contenedor">
    <path 
        id="mi-trazo" 
        d="M10 100 C 150 0, 450 200, 590 100" 
        fill="none" 
        stroke="#4CAF50" 
        stroke-width="5" 
        stroke-linecap="round"
    />
</svg>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
    // 1. Selecciona el elemento path
    const path = document.getElementById('mi-trazo');
    
    // 2. Calcula la longitud total (¡crucial!)
    const pathLength = path.getTotalLength();
    
    // 3. Establece el estado inicial: Trazo completamente oculto
    path.style.strokeDasharray = pathLength;
    path.style.strokeDashoffset = pathLength;
    
    // 4. Registra el plugin de ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    // 5. Crea la animación con GSAP y ScrollTrigger
    gsap.fromTo(path, 
        // Estado de inicio de la animación: oculto
        { strokeDashoffset: pathLength },
        // Estado final de la animación: dibujado
        { 
            strokeDashoffset: 0,
            ease: "none", // Sincronización lineal para que se sienta fluido con el scroll
            
            // Configuración de ScrollTrigger
            scrollTrigger: {
                trigger: "#svg-contenedor", // El contenedor SVG es el elemento a monitorear
                start: "top center",       // La animación inicia cuando la parte superior del SVG llega al centro de la vista
                end: "bottom center",      // La animación termina cuando la parte inferior del SVG llega al centro de la vista
                scrub: true,               // ¡CLAVE! Vincula directamente el progreso del scroll con el progreso de la animación
                // markers: true,           // Descomenta para ver las líneas de inicio/fin para depuración
            }
        }
    );
    
});
</script>

</body>
</html>